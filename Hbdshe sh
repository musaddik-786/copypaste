Our this earlier code was working fine it was able to tell if it is strucutred or unstrcutred

from dotenv import load_dotenv
import os
import openai

openai.api_type = "azure"
openai.api_base = os.getenv("AZURE_OPENAI_ENDPOINT")
openai.api_version = os.getenv("AZURE_OPENAI_API_VERSION")
openai.api_key = os.getenv("AZURE_OPENAI_API_KEY")

deployment_name = os.getenv("AZURE_OPENAI_CHAT_DEPLOYMENT")

def classify_document(document_content):
    """
    Classifies the document layout as 'structured' or 'unstructured' based on text and table information.
    """
    text = document_content["text"]
    tables = document_content["tables"]

    # Prepare the prompt
    prompt = f"""
You are an AI assistant. Classify the following document layout as either 'structured' or 'unstructured'.

Structured documents typically contain tables, forms, or consistent layouts (e.g., insurance forms like ACORD). 
Unstructured documents contain free-form text, paragraphs, or inconsistent layouts (e.g., quote documents).

Document Text:
{text[:2000]}

Tables:
{tables if tables else "No tables detected"}

Reply with only one word: structured or unstructured.
"""


    response = openai.ChatCompletion.create(
        engine=deployment_name,
        messages=[{"role": "user", "content": prompt}],
        max_tokens=4,
        temperature=0.0  # Ensure deterministic responses
    )
    return response['choices'][0]['message']['content'].strip()


